# iRead 《区块链技术进阶与实战》

## 基础入门

比特币作为一种旨在解决之前“数字货币”所存在的以下几个问题：
- 发行机构控制货币的发行以及相关政策
- 以前的“数字货币”无法做到匿名化交易
- 货币自生的价值无法得到保证
- 所持货币对于持币人来说，不具备完全的安全性

**区块链**：本质上是一个去中心化的数据库，是分布式数据存储、点对点传输、共识机制、加密算法等计算机技术的新型应用模式。
- 狭义上来说，区块链是一种按照时间顺序将数据区块以顺序相连的方式组合成的一种链式数据结构，并以密码学方式保证的不可篡改、不可伪造的分布式账本。
- 广义上来说，区块链技术是利用链式数据结构来验证与存储数据、利用分布式节点共识算法来生成和更新数据、利用密码学方式保证数据传输和访问的安全、利用自动化脚本代码组成的智能合约来变成和操作数据的一种全新的分布式基础架构和计算范式。

主要技术：
- 块链式数据结构
- 分布式共识算法
- 密码学方式

|主要概念|解释|
|:--|:--|
|交易|每一次导致区块状态变化的操作是交易，每一次交易都对应唯一的交易哈希值|
|区块|打包记录一段时间内发生的交易和状态结果，是对当前账本的一次共识。每个区块以一个相对平稳的时间间隔加入到链上，在企业级区块链平台中，共识时间可以动态设置|
|链|区块按照实践顺序串联起来，通过每个区块记录上一个区块的哈希值关联，是整个状态改变的日志记录|

共识机制：是区块链系统中各个节点达成一直的策略和方法。替代了传统应用中保证信任和交易安全的第三方中心机构，能够降低由于各方面不信任而产生的第三方信用成本、时间成本、资本耗用。既是写入数据的方式，也是防止篡改的手段。

智能合约：是可自动化执行预先定义规则的一段计算机程序代码，它自己就是一个系统参与者。

区块链基本架构可以分为：数据层、网络层、共识层、激励层、合约层和应用层。

### 数据层
- 区块结构
    - 区块头
        - 版本
        - 前区块哈希值
        - Merkle根 （哈希二叉树）
        - 时间戳
        - 随机数
    - 区块体
        - 交易数据

### 网络层
- P2P 网络架构
- 传输机制
     - 比特币交易节点将新生成的交易数据向全网所有节点进行广播
     - 每个节点都将收集到的交易数据存储到一个区块中
     - 每个节点基于自身算力在区块中找到一个具有足够难度的工作量证明
     - 当节点找到区块的工作量证明后，就向全网所有节点广播此区块
     - 只要包含在区块中的所有交易都 有效而且之前未存在过，其他节点才认同该区块的有效性
     - 其他节点接收该数据区块，并在该区块的末尾制造新的区块以延长链，而将被接收的区块的随机哈希值将视为新区块的前序区块哈希值
- 验证机制

### 共识层
- PoW 工作量证明机制，优点：完全去中心化和分布式账簿。缺点：消耗资源。
- PoS 股权证明机制，优点：高效节能。缺点：可能会遭到攻击。
- DPoS 股份授权证明机制。兼具上述优点
- PBFT 实用拜占庭容错算法。允许每个节点发布公钥，任何通过节点的消息都由节点签名。

### 激励层
将经济因素引入区块链技术的一个层次。
合理的激励机制：使得共识节点最大化自身收益的个体行为与区块链系统的安全性和有效性相契合，从而使大规模的节点对区块链的历史形成稳定的共识。
- 发行机制
- 分配机制

### 合约层
- 用程序逻辑中的丰富合约规则表达能力实现了不信任方之间的公平交换，避免了恶意方终端协议的可能性。
- 最小化交易方之间的交互，避免了计划外的监控和跟踪的可能性
- 丰富了交易与外界状态的交互，比如可信数据源提供的股票、天气等信息。

## 以太坊深入解读

图灵完备：一切可计算的问题都能通过计算解决。

以太坊虚拟机技术，有挖矿功能，使得开发者可以在以太坊区块链中测试去中心化应用。随着第三方开发者为普通用户开发的去中心化应用逐渐增多，以太坊将不仅是一个开发平台，也是一个应用市场。

### 基本概念
